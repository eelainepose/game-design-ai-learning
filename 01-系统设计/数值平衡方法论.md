# 游戏数值平衡方法论

> 基于 observablehq/plot 和 chartjs 的可视化实践

---

## 数值设计核心原则

### 1. 明确设计目标
- 游戏体验预期（爽快/硬核/策略）
- 付费点设置（F2P/买断制）
- 游戏时长控制

### 2. 建立数值模型
- **输入**：玩家行为、系统参数
- **处理**：公式计算、随机算法
- **输出**：玩家体验、经济循环

### 3. 验证与迭代
- 理论计算
- 模拟测试
- 真实玩家数据

---

## 常用数值公式

### 经验曲线
```
Level_n = Level_{n-1} * ratio

常见 ratio：
- 线性增长：1.1
- 中等增长：1.2
- 高速增长：1.5
```

### 伤害公式
```
伤害 = 攻击力 * 技能倍率 - 防御力 * 减伤系数

或百分比减伤：
伤害 = 攻击力 * (1 - 防御力/(防御力+常数))
```

### 经济平衡
```
产出速率 = 消耗速率 * (1 + 盈余系数)

盈余系数建议：
- 日常：0.1-0.2（10-20%盈余）
- 活动：0.3-0.5（激励参与）
```

---

## 可视化工具实践

### 使用 Chart.js 绘制数值曲线

```javascript
const ctx = document.getElementById('expChart').getContext('2d');
const chart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
        datasets: [{
            label: '经验需求',
            data: [100, 120, 144, 173, 207, 249, 299, 359, 431, 517],
            borderColor: 'rgb(75, 192, 192)',
            tension: 0.1
        }]
    }
});
```

### 使用 Observable Plot 分析数据

```javascript
import * as Plot from "@observablehq/plot";

Plot.plot({
    marks: [
        Plot.line(data, {x: "level", y: "exp_required", stroke: "blue"}),
        Plot.dot(data, {x: "level", y: "exp_required", fill: "red"})
    ]
})
```

---

## 实战案例：RPG 伤害平衡

### 问题
设计一个回合制 RPG 的伤害系统，要求：
- 战斗时长：3-5 回合
- 成长感明显
- 策略性（克制关系）

### 分析过程

1. **确定基础数值**
   - 玩家 HP：100
   - 期望战斗时长：4 回合
   - 怪物平均伤害：100/4 = 25

2. **设计克制关系**
   - 克制：伤害 * 1.5
   - 被克制：伤害 * 0.5
   - 正常：伤害 * 1.0

3. **可视化验证**
   - 克制：100/(25*1.5) = 2.7 回合
   - 正常：100/25 = 4 回合
   - 被克：100/(25*0.5) = 8 回合

4. **调整优化**
   - 被克制伤害过低，调整为 0.7
   - 重新计算：100/(25*0.7) = 5.7 回合（可接受）

---

## 数值检查清单

- [ ] 前期体验是否流畅？
- [ ] 后期数值是否崩坏？
- [ ] 付费玩家优势是否适度？
- [ ] 随机性是否可控？
- [ ] 不同流派是否平衡？

---

*待补充更多实际案例...*
